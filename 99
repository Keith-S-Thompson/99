#!/usr/bin/perl

#
# Interpreter for the "99" programming language.
#

use strict;
use warnings;

#
# Check for errors.
#
while (<>) {
    s/#.*$//;
    s/^\s*//;
    s/\s*$//;
    die $ARGV eq '-' ? 'stdin' : $ARGV, ":$.: Syntax error\n" if /./;
}

#
# "Run" the "program".
#
for (reverse 0..99) {
    my $s   = $_ == 1 ? ''   : 's';
    my $num = $_ == 0 ? 'No' : $_;
    my $one = $_ == 1 ? 'it' : 'one';
    my $bottles = "$num bottle$s of beer";
    my $take = "Take $one down, pass it around";
    print "$bottles on the wall.\n" if $_ < 99;
    print "\n" if $_ % 99;
    print "$bottles on the wall,\n$bottles.\n$take,\n" if $_;
}
