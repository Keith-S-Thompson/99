#!/usr/bin/perl

#
# Interpreter for the "99" programming language.
#

use strict;
use warnings;

#
# Check for errors.
#
while (<>) {
    s/#.*$//;
    s/^\s*//;
    s/\s*$//;
    die $ARGV eq '-' ? 'stdin' : $ARGV, ":$.: Syntax error\n" if /./;
}

#
# "Run" the "program".
#
foreach my $i (reverse 0..99) {
    my $s   = $i == 1 ? ''   : 's';
    my $num = $i == 0 ? 'No' : $i;
    my $one = $i == 1 ? 'it' : 'one';
    my $bottles = "$num bottle$s of beer";
    my $take = "Take $one down, pass it around";
    print "$bottles on the wall.\n" if $i < 99;
    print "\n" if $i % 99;
    print "$bottles on the wall,\n$bottles.\n$take,\n" if $i;
}
